(()=>{"use strict";(()=>{function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.select=e,this.value=this.select.querySelector(".select__value"),this.menu=this.select.querySelector(".select__menu"),this.options=this.select.querySelectorAll(".select__menu .select__item"),this.input=this.select.querySelector(".select__input"),this.selectActiveClass="select--isActive",this.menuActiveClass="select__menu--isActive",this.init()}var n,r;return n=t,(r=[{key:"init",value:function(){var e=this;this.select.addEventListener("click",(function(){return e.toggleMenu()})),this.options.forEach((function(t){t.addEventListener("click",(function(){return e.setValue(t)}))}));var t=this.getValue();if(t){var n=this.select.querySelector('[data-value="'.concat(t,'"]'));this.setValue(n)}}},{key:"toggleMenu",value:function(){this.select.classList.toggle(this.selectActiveClass),this.menu.classList.toggle(this.menuActiveClass)}},{key:"setValue",value:function(e){var t=e.getAttribute("data-value"),n=e.cloneNode(!0);this.input&&(this.input.value=t),this.select.setAttribute("data-value",t),this.value.innerHTML="",this.value.appendChild(n)}},{key:"getValue",value:function(){return this.input?this.input.value:this.select.getAttribute("data-value")}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modal=t,this.body=document.body,this.closeButton=this.modal.querySelector(".modal__close"),this.modalActiveClass="modal--isActive",this.noScrollClass="no-scroll",this.init()}var t,r;return t=e,(r=[{key:"init",value:function(){var e=this;this.closeButton.addEventListener("click",(function(){return e.close()}))}},{key:"open",value:function(){this.modal.classList.add(this.modalActiveClass),this.body.classList.add(this.noScrollClass)}},{key:"close",value:function(){this.modal.classList.remove(this.modalActiveClass),this.body.classList.remove(this.noScrollClass)}}])&&n(t.prototype,r),e}();function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=document.querySelectorAll("#profile-menu .menu-item"),c=document.querySelector("#selectSearchServer");if(c){var l=function(e){if(!e)return u.style.display="none",void(f.innerHTML="");u.style.display="",f.innerHTML=e},a=function(e){v=e,e?(m.innerHTML="Пожалуйста, подождите",l("")):m.innerHTML="Поиск"},s=new t(c),u=document.querySelector("#error-group"),f=document.querySelector("#error-text"),h=(document.querySelector("#searchResultBox"),document.querySelector("#searchResult")),d=document.querySelector("#searchResult tr"),v=!1,m=document.querySelector("#searchButton .button__text"),y=document.querySelector("#search_form");y.addEventListener("submit",(function(e){if(e.preventDefault(),s&&!v){var t=new FormData(y);t.append("server",s.getValue()),function(){for(;h.children.length>1;)h.children.item(1).remove()}(),a(!0),fetch("/php/functions.php?query=search",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){if(a(!1),!e)return l("Проблема с подключением к серверу. Попробуйте позже.");switch(e.error){case"length":l("Строка запроса должна содержать не менее 5 символов")}if(!0===e.result){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,c=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw c}}}}(e.accounts);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=d.cloneNode(!0);h.appendChild(o),o.children[0].innerText=r.id,o.children[1].innerHTML='<a href="/profile?server='.concat(r.server,"&id=").concat(r.id,'" style="color:#fff;text-decoration: none;">').concat(r.name,"</a>"),o.style.display=""}}catch(e){n.e(e)}finally{n.f()}}})).catch((function(){a(!1),l("Проблема с подключением к серверу. Попробуйте позже.")}))}}))}var p=document.querySelector("#logout-btn");p&&p.addEventListener("click",(function(e){e.preventDefault(),fetch("/php/functions.php?query=exit").then((function(e){window.location="/"}))})),o&&o.forEach((function(e){return e.addEventListener("click",(function(e){if(e.preventDefault(),e.currentTarget.dataset.href){var t=document.querySelector("#profile-menu .menu-item--active");if(t){if(t.dataset.href){var n=document.querySelector(t.dataset.href);n&&(n.style.display="none")}t.classList.remove("menu-item--active")}e.currentTarget.classList.add("menu-item--active");var r=document.querySelector(e.currentTarget.dataset.href);r&&(r.style.display="")}}))}));var S=document.querySelector("#achievementModal"),b=S.querySelector(".modal__title h4"),g=S.querySelector(".modal__body"),q=new r(S),A=document.querySelectorAll(".achievement-item"),L=["Внешний вид","Тачка на прокачку","Истинный олд","Миллионер","Меткий стрелок","Автопарк","Home, sweet home","Бизнесмен","Семья","Лидер","Майнер","Легенда перестрелок","Качок","Братва рвется к власти","Дитя улиц","Боец"],_=["Сменить прическу, нанести татуировку","Установить любой вид тюнинга на автомобиль","Получить 10, 15, 50, 100 уровень","Заработать 1, 20, 100, 500 миллионов","Прокачать все навыки стрельбы","Приобрести 1, 2, 3, 5 автомобилей","Купить дом","Владеть 1, 2, 3, 5 бизнесами","Вступить в семью, получить повышение, стать заместителем, основать семью","Стать лидером любой фракции","Построить майнинг ферму 1, 2, 3, 4 уровня","Войти в топ-10, топ-5, топ-3, топ-1 по убийствам на капте","Прокачать силу и выносливость на максимум","Выиграть 5, 20, 50, 100 битв за бизнесы","Выиграть 5, 20, 50, 100 каптов","Выиграть 5, 20, 50, 100 боев в спортзале"];A.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=e.dataset.id;n>=0&&n<16&&(b.innerText=L[n],g.innerText=_[n],q.open())}))}))})()})();